---
title: 운영체제 5. 프로세스 동기화
date: 2018-11-28
categories:
- Operating System
tags:
- Operating System
- Study
---
# 01 프로세스 간 통신





## 1. 프로세스 간 통신의 개념

- 프로세스간 통신의 개념 : 프로세스가 다른 프로세스와 데이터를 주고 받는 것을 의미
- 프로세스 내부 데이터 통신, 프로세스 간 데이터 통신, 네트워크를 이용한 데이터 통신이 있음

## 2. 프로세스간 통신의 분류

|분류방식 | 종류 | 예 | 의미|
| --- | --- | --- |---|
| 통신 방향에 따른 분류 |양방향통신|일반적 통신, 소켓|데이터를 동시에 양쪽 방향 전송|
||반양방향 통신|무전기|데이터를 양쪽 방향으로 전송할 수 있지만 동시전송 불가능/ 특정 시점에 한쪽방향 전송가능|
||단방향 통신| 전역 변수, 파일, 파이프|모스 신호처럼 한쪽 방향으로만 데이터를 전송가능|
|통신 구현 방식에 따른 분류| 대기가 있는 통신(동기화 통신)| 파이프, 소켓|동기화를 지원O / 데이터를 받는 쪽은 데이터가 도착할 때까지 자동으로 대기 상태에 머무름|
|| 대기가 없는 통신|전역변수, 파일|동기화를 지원X / 데이터를 받는 쪽이 바쁜 대기를 사용하여 데이터가 도착했는지 여부를 직접확인|



### 2.1 통신 방향에 따른 분류
### 2.2 통신 구현 방식에 따른 분류

## 3. 프로세스 간 통신의 종류
### 3.1 전역 변수를 이용한 통신
- 공동으로 관리하는 메모리를 사용하여 데이터를 주고받는 것

### 3.2 파일을 이용한 통신
- 저장장치에 파일을 읽고 쓰는 방법으로 데이터를 주고받는 것

### 3.3 파이프를 이용한 통신
- 운영체제가 제공하는 동기화 통신 방식으로, 파이프에 쓰기 연산을 하면 데이터가 전송되고 읽기 연산을 하면 데이터를 받음
- 파이플 이용한 토신은 단방향 통신 but 양방향 통신을 하려면 파이프 2개가 필요함

### 3.4 소켓을 이용한 통신
- 여러 컴퓨터에 있는 프로세스와 프로세스를 소켓으로 연결하여 데이터를 주고받는 것
- 소켓에 쓰기 연산을 하면 데이터가 전송되고 읽기 연산을 하면 데이터를 받음

### 3.5 정리

|종류|운영체제 동기화 지원|open()/close()사용|
|---|---|---|
|전역변수|X(바쁜 대기)| X|
|파일|X(wait()함수 이용)| O|
|파이프|O|O|
|소켓|O|O|

# 02 공유 자원과 임계구역

- 공유자원 : 여러 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등
  - 공유 자원은 공동으로 이용되므로 누가 언제 데이터를 읽고 쓰느냐에 따라 결과가 달라짐

## 1. 공유 자원의 접근

- 경쟁 조건<sup>critical section</sup> : 공유 자원을 병행적으로 읽거나 쓰는 상황
- 경쟁 조건이 발생하면 공유 자원 접근 순서에 따라 실행 결과가 달라질 수 있음

## 2. 임계 구역
- 공유자원 접근 순서에 따라 실행 결과가 달라지는 프로그램의 영역

## 3. 생산자-소비자 문제

## 4. 임계구역 해결 조건

- 상호 배제<sup>mutual exclusion</sup>  : 한 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역에 들어갈 수 없다.

- 한정 대기<sup>bounded waiting</sup>  : 어떤 프로세스도 무한 대기하지 않아야 한다.

- 진행의 융통성<sup>progress flexibility</sup>  : 한 프로세스가 다른 프로세스의 진행을 방해해서는 안 된다.



# 03 임계구역 해결 방법

## 1. 기본 코드 소개

## 2. 임계구역 해결 조건을 고려한 코드 설계

### 2.1 상호 배제 문제

### 2.2 한정 대기 문제
- 교착상태 : 한정 대기조건을 보장하지 못하는 상황
  - 프로세스 P1과 P2 모두 while문을 빠져나오지 못하고 무한 루프에 빠져 임계구역에 진입하지 못함

### 2.3 진행의 융통성 문제
### 2.4 하드웨어적인 해결 방법

## 3. 피터슨 알고리즘


## 4. 데커 알고리즘
- 하드 웨어의 도움 없이 임계구역 문제를 해결 할 수 있음

## 5. 세마포어
- 임계구역에 진입하기 전에 스위치를 사용 중으로 놓고 임계구역으로 들어가는 방법
  - 피터슨 알고리즘이나 데커 알고리즘 보다 간단하고 사용 쉬움


- 세마포어 사용전 초기 설정 Semaphore(n)
  - n은 공유 가능한 자원의 수를 나타냄



<세마포어코드>
~~~~
Semaphore(n);
P();


  |임계구역|


V();
~~~~


## 6. 모니터
- 세마포어 알고리즘을 자동으로 처리하도록 설계한 코드
- 보호할 자원을 임계구역으로 숨기고 임계구역에서 작업할 수 있는 인터페이스만 제공하여 자원을 보호한다.
